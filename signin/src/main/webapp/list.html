<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>个人签到信息</title>
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1">
<link rel="stylesheet" href="media/layui/css/layui.css" media="all">
<script src="media/js/jquery.min.js"></script>
</head>
<body>
	<div class="layui-container">
		<table id="tbdata" lay-filter="tbop"></table>
	</div>
	<script src="media/layui/layui.js"></script>
	<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
	<script>
	layui.use('table', function(){
		  var table = layui.table;
		  table.render({
		    elem: '#tbdata'
		    ,url: 'signinlist' //数据接口
		    ,title: '签到信息'
		    ,page: true //开启分页
		    ,cols: [[ //表头
		      {field: 'id', title: '序号', sort: true, fixed: 'left'}
		      ,{field: 'date', title: '日期'}
		      ,{field: 'state', title: '状态'}
		      ,{field:'right', title: '操作',toolbar:"#barDemo"}
		    ]]
		  });
		  //监听工具条
	table.on('tool(tbop)', function(obj){ //注：tool 是工具条事件名，test 是 table 原始容器的属性 lay-filter="对应的值"
    	var data = obj.data //获得当前行数据
    	,layEvent = obj.event; //获得 lay-event 对应的值
    	if(layEvent === 'reply'){
    	woo(data);
    	loadRoles(data);
    }
  })
	});
	function loadRoles(data) {
        layer.open({
            area: ['500px', '300px'],
            title: '消息发送',
            type: 1,
            content:  $('#dvlay'), //这里content是一个普通的String
            btn: ['确认', '取消'],
            yes: function(index, layero){
                layer.close(index);
            },cancel: function(){
            }
        });
        
};
function woo(data) {
	var v = data.sl
	$("#title1").val(v[0].stime);
	$("#title2").val(v[1].stime);
}	
</script>
<script type="text/html" id="barDemo">
  <a class="layui-btn layui-btn-xs" lay-event="reply">查看</a>
</script>
</body>
<div style="display: none;margin-top: 10px;width: 480px" id="dvlay">
<form id="fm1" class="layui-form layui-form-pane" >
    <div class="layui-form-item" pane >
        <label class="layui-form-label">早签到：</label>
        <div class="layui-input-inline">
            <input id="title1" name="title1" class="layui-input" readonly>
        </div>
    </div>
    <div class="layui-form-item" style="height:40px">
        <label class="layui-form-label">晚签到：</label>
        <div class="layui-input-inline" id="dv1">
			<input id="title2" name="content3" class="layui-input" readonly>
        </div>
    </div>
</form>
</div>
</body>
</html>